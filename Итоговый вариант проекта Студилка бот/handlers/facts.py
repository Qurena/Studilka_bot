#handlers/facts.py

import logging
import random

from aiogram import types
from aiogram.utils.keyboard import InlineKeyboardBuilder

from config.bot_config import dp

EGE_FACTS = [
    "üéì –ü–µ—Ä–≤—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ï–ì–≠ –≤ –†–æ—Å—Å–∏–∏ –ø—Ä–æ—à–µ–ª –≤ 2009 –≥–æ–¥—É.",

    "üìä –ö–∞–∂–¥—ã–π –≥–æ–¥ –ï–ì–≠ —Å–¥–∞—é—Ç –±–æ–ª–µ–µ 750 000 –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏.",

    "üåç –ï–ì–≠ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è –≤ –±–æ–ª–µ–µ —á–µ–º 20 —Å—Ç—Ä–∞–Ω–∞—Ö –º–∏—Ä–∞ –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã.",

    "‚è∞ –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω –ï–ì–≠ - –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (235 –º–∏–Ω—É—Ç).",

    "üìù –ù–∞ –ï–ì–≠ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–∏—à—É—Ç —Å–æ—á–∏–Ω–µ–Ω–∏–µ –æ–±—ä–µ–º–æ–º –Ω–µ –º–µ–Ω–µ–µ 150 —Å–ª–æ–≤.",

    "üíª –° 2021 –≥–æ–¥–∞ –ï–ì–≠ –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π —Ñ–æ—Ä–º–µ.",

    "üîç –í—Å–µ –±–ª–∞–Ω–∫–∏ –ï–ì–≠ —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",

    "üì± –ù–∞ –ï–ì–≠ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –∏–º–µ—Ç—å –ø—Ä–∏ —Å–µ–±–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–≤—è–∑–∏, –Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø—Ä–æ—Å—Ç—ã–µ —á–∞—Å—ã.",

    "üéØ 100 –±–∞–ª–ª–æ–≤ –ø–æ –ï–ì–≠ –µ–∂–µ–≥–æ–¥–Ω–æ –ø–æ–ª—É—á–∞—é—Ç –º–µ–Ω–µ–µ 1% —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.",

    "üåü –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ï–ì–≠ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 4 –ª–µ—Ç –ø–æ—Å–ª–µ —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞."
]


@dp.callback_query(lambda c: c.data == "facts")
async def process_facts(callback: types.CallbackQuery):

    await callback.answer()

    fact = random.choice(EGE_FACTS)

    facts_text = f"""<b>–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ –ï–ì–≠:</b>

{fact}"""

    builder = InlineKeyboardBuilder()
    builder.button(text="üé≤ –°–ª–µ–¥—É—é—â–∏–π —Ñ–∞–∫—Ç", callback_data="facts")
    builder.button(text="‚¨ÖÔ∏è –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")
    builder.adjust(1)

    try:
        await callback.message.edit_text(
            facts_text,
            reply_markup=builder.as_markup(),
            parse_mode="HTML"
        )
        logging.info(f"–ü–æ–∫–∞–∑–∞–Ω —Ñ–∞–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {callback.from_user.id}")
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —Ñ–∞–∫—Ç–∞: {e}")